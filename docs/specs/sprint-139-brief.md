# Sprint 139: Warranty & Maintenance Tracking — Implementation Brief

> **Generated:** 2026-02-06
> **Generated By:** Roadmap Planning Session (Phase 22: Client Experience)
> **Status:** Ready for Implementation (skip plan mode)
> **Priority:** P1 | **Hours:** 8-10

---

## Overview

Post-project value: Track warranties per project item, schedule maintenance reminders, handle service requests from clients. Revenue opportunity through maintenance contracts.

---

## Existing Infrastructure

| Item | File | Notes |
|------|------|-------|
| Warranty types | types/index.ts lines 2630-2740 | Already defined |
| useWarranties | lib/hooks/useWarranties.ts | Exists — CRUD operations |

---

## Files to Create

| # | File Path | Purpose | Pattern |
|---|-----------|---------|---------|
| 1 | components/warranty/WarrantyRegistry.tsx | Per-project warranty list with expiry tracking | DataTable |
| 2 | components/warranty/ExpiryAlert.tsx | Expiry warning at 30/60/90 days | Alert pattern |
| 3 | components/warranty/MaintenanceSchedule.tsx | Recurring maintenance tasks | Calendar pattern |
| 4 | components/warranty/ServiceRequestForm.tsx | Client service request submission | FormModal |
| 5 | components/warranty/ServiceRequestTracker.tsx | Request status tracking | Kanban/list |
| 6 | lib/hooks/useMaintenanceSchedule.ts | Recurring maintenance CRUD | useScheduleEvents |
| 7 | lib/hooks/useServiceRequests.ts | Service request workflow | useIssues pattern |
| 8 | app/client/warranty/page.tsx | Client warranty portal | Standard page |
| 9 | app/dashboard/warranty/page.tsx | GC warranty management | Standard page |
| 10 | functions/src/email/warrantyAlerts.ts | Expiry alert emails | automatedEmails pattern |

## Files to Modify

| # | File Path | What Changes |
|---|-----------|-------------|
| 1 | types/index.ts | Add ServiceRequest, MaintenanceTask types |
| 2 | firestore.rules | Add serviceRequests, maintenanceTasks collections |

---

## Parallel Work Plan

### Batch 1
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 1 | Warranty registry + expiry alerts | ~25k |
| Agent 2 | Maintenance schedule hook + component | ~20k |
| Agent 3 | Service request form + tracker + hook | ~25k |

### Batch 2
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 4 | Pages (client + dashboard) + email alerts + Firestore rules | ~25k |

---

## Acceptance Criteria

- [ ] Warranties tracked per project with manufacturer, duration, expiry
- [ ] Expiry alerts at 30/60/90 days before expiration
- [ ] Maintenance schedule with recurring reminders
- [ ] Clients can submit service requests through portal
- [ ] Service request tracking (submit → triage → assign → resolve)
- [ ] npx tsc --noEmit passes

---

## Estimated Token Budget: ~95k
