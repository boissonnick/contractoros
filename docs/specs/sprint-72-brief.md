# Sprint 72: UI Design System Propagation — Implementation Brief

> **Generated:** 2026-02-05
> **Generated By:** Antigravity audit + codebase UI pattern comparison
> **Spec:** None (design consistency sprint)
> **Status:** Ready for Implementation (skip plan mode)

---

## Why This Sprint

Google Antigravity applied a premium "material UI" redesign to the **dashboard layout and homepage** — new fonts (Outfit headings), gradient stat cards, rounded-2xl/3xl corners, ambient glow effects, shadow tokens, and dark sidebar. But the rest of the platform still uses the old basic styling: plain white cards, rounded-lg, no font-heading, no gradients, basic shadows.

**The gap is jarring.** A user navigates from the polished dashboard homepage into Clients or Expenses and the visual quality drops noticeably. This sprint propagates the premium patterns everywhere.

---

## Design System: What Antigravity Introduced

### New Design Tokens (already in globals.css)
| Token | Value | Usage |
|-------|-------|-------|
| `font-heading` | Outfit font family | All headings, nav labels, stat titles |
| `font-sans` | Inter font family | Body text, descriptions |
| `--shadow-soft` | `0 2px 10px -2px rgba(15,23,42,0.08), 0 8px 24px -4px rgba(15,23,42,0.04)` | Primary card shadow |
| `--shadow-card` | `0 1px 1px rgba(0,0,0,0.05), 0 4px 6px -4px rgba(0,0,0,0.05)` | Subtle card shadow |
| `--shadow-glow` | `0 0 20px -5px rgba(59,130,246,0.3)` | Accent glow |
| `--radius-xl` | `1rem` | Standard corners |
| `--radius-2xl` | `1.5rem` | Cards |
| `--radius-3xl` | `2rem` | Hero cards |
| `.card-interactive` | `bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md hover:border-gray-300` | Interactive cards |
| `.glass` | `bg-white/80 backdrop-blur-lg` | Overlay effects |

### Premium Patterns (from dashboard/page.tsx)
| Pattern | Code | Where Used |
|---------|------|------------|
| Gradient stat card bg | `bg-gradient-to-br from-X-500/10 to-X-600/5 border-X-200/50` | StatCard on dashboard |
| Premium rounded | `rounded-2xl` (cards), `rounded-3xl` (hero sections) | Dashboard cards |
| Heading font | `font-heading` class on titles | AppShell nav, dashboard stats |
| Icon containers | `rounded-xl bg-white shadow-sm ring-1 ring-black/5` | Dashboard stat icons |
| Section headers | `font-heading font-bold uppercase tracking-wider text-gray-400` | Dashboard sections |
| Hover glow | `hover:shadow-lg hover:shadow-brand-500/5` | Dashboard stat cards |
| Background glow | `bg-gradient-to-b from-brand-100/50 to-transparent` | AppShell main content |
| Ambient blur | `blur-2xl` circle on hover | Dashboard stat cards |

### What's Already Modern
- ✅ **AppShell.tsx** — Dark sidebar, font-heading, brand-950, gradient logo, rounded-xl nav
- ✅ **Dashboard homepage** — Premium StatCard, gradient cards, rounded-3xl sections, font-heading
- ✅ **Button.tsx** — Already has gradient primary variant, shadow-brand, hover elevation
- ✅ **globals.css** — All design tokens defined and ready to use

---

## What Needs Updating

### Tier 1: Shared UI Components (Multiplier — fixes cascade to all pages)

| Component | File | Lines | Current State | What Changes |
|-----------|------|-------|---------------|-------------|
| Card | `components/ui/Card.tsx` | ~200 | `rounded-xl border-gray-200 shadow-md` | Add `rounded-2xl`, `shadow-soft`/`shadow-card` tokens, gradient bg support |
| PageHeader | `components/ui/PageHeader.tsx` | 172 | No `font-heading`, basic text | Add `font-heading` to title, optional subtitle styling |
| StatsGrid | `components/ui/StatsGrid.tsx` | ~214 | Basic Card, no font-heading, `rounded-lg` icon boxes | Add `font-heading`, upgrade icon containers to premium pattern |
| Badge | `components/ui/Badge.tsx` | ~100 | `rounded-full`, basic colors | Fine as-is — `rounded-full` is correct for badges |
| FilterBar | `components/ui/FilterBar.tsx` | ~150 | Basic selects with `rounded-lg` | Upgrade to `rounded-xl`, add `font-heading` to labels |
| FormModal | `components/ui/FormModal.tsx` | ~200 | Basic modal styling | Upgrade to `rounded-2xl`, add `font-heading` to title |
| EmptyState | `components/ui/EmptyState.tsx` | ~100 | Basic white card | Add subtle gradient bg, `font-heading` on title |
| DataTable | `components/ui/DataTable.tsx` | ~300 | Basic table styling | Upgrade header to `font-heading`, add `rounded-2xl` wrapper |

### Tier 2: Dashboard Feature Pages (6 pages — most user-facing)

| Page | File | Lines | Current Patterns | What Changes |
|------|------|-------|------------------|-------------|
| Clients | `app/dashboard/clients/page.tsx` | ~600 | Basic Card stats, `rounded-xl`, no font-heading | Premium stat cards, font-heading, gradient bgs |
| Expenses | `app/dashboard/expenses/page.tsx` | ~400 | Basic summary cards, `rounded-lg` filters | Premium stat cards, rounded-xl filters, font-heading |
| Invoices | `app/dashboard/invoices/page.tsx` | ~450 | Basic Card stats, colored icon boxes | Premium stat pattern, font-heading throughout |
| Projects | `app/dashboard/projects/page.tsx` | ~700 | Basic Card stats, `rounded-xl` project cards | Premium stat cards, font-heading, card upgrade |
| Team | `app/dashboard/team/page.tsx` | ~750 | `border-l-4` stat cards, basic member cards | Premium stat cards (replace border-l pattern), font-heading |
| Subcontractors | `app/dashboard/subcontractors/page.tsx` | ~350 | Uses StatsGrid (cascades from Tier 1) | Mostly auto-fixed by StatsGrid update |

### Tier 3: Secondary Dashboard Pages

| Page | File | Notes |
|------|------|-------|
| Schedule | `app/dashboard/schedule/page.tsx` | Calendar-heavy, mostly needs header/wrapper update |
| Messages | `app/dashboard/messaging/page.tsx` | Chat UI — mostly needs container/header update |
| Reports | `app/dashboard/reports/page.tsx` | Report-heavy — needs header/card wrapper update |
| Intelligence | `app/dashboard/intelligence/page.tsx` | Recently built (Sprint 67) — may already be modern |
| Settings | `app/dashboard/settings/page.tsx` | Settings pages — needs header/section card update |
| Estimates | `app/dashboard/estimates/page.tsx` | Needs stat cards + header update |
| Daily Logs | `app/dashboard/logs/page.tsx` | Needs header/card update |

### Tier 4: Non-Dashboard Pages

| Page | File | Notes |
|------|------|-------|
| Login | `app/login/page.tsx` | Uses `bg-gradient-to-br from-blue-600 to-blue-800` — update to brand colors, add font-heading |
| Register | `app/register/page.tsx` | Same as login — align to brand |
| Onboarding | `app/onboarding/*/page.tsx` | Align to brand palette |
| Client Portal | `app/client/*/page.tsx` | Portal pages — apply premium patterns |
| Sub Portal | `app/sub/*/page.tsx` | Portal pages — apply premium patterns |
| Field Portal | `app/field/*/page.tsx` | Portal pages — apply premium patterns |
| E-Signature | `app/sign/[token]/page.tsx` | Public-facing — should be polished |

---

## Specific Changes Per Component

### Card.tsx — The Multiplier Fix

Current:
```tsx
'bg-white rounded-xl border border-gray-200'
// hover: 'shadow-md'
```

Updated:
```tsx
// Default card
'bg-white rounded-2xl border border-gray-100 shadow-card'
// hover: 'shadow-soft hover:border-gray-200'

// Add variant prop for gradient stat cards:
// variant="stat-blue" → 'bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-200/50 rounded-2xl'
```

### PageHeader.tsx — Font Upgrade

Current:
```tsx
<h1 className="text-xl sm:text-2xl font-bold text-gray-900 truncate">{title}</h1>
```

Updated:
```tsx
<h1 className="text-xl sm:text-2xl font-bold text-gray-900 truncate font-heading tracking-tight">{title}</h1>
```

### StatsGrid.tsx — Premium Stat Pattern

Current icon container:
```tsx
<div className={`p-3 rounded-lg ${iconBg}`}>
```

Updated:
```tsx
<div className={`p-2.5 rounded-xl bg-white shadow-sm ring-1 ring-black/5 ${iconColor}`}>
```

Current stat label:
```tsx
<p className="text-sm font-medium text-gray-500">{stat.label}</p>
```

Updated:
```tsx
<p className="text-xs font-bold uppercase tracking-wider text-gray-400 font-heading">{stat.label}</p>
```

### Login Page — Brand Alignment

Current:
```tsx
<div className="min-h-screen bg-gradient-to-br from-blue-600 to-blue-800 ...">
<h1 className="text-3xl font-bold text-white">ContractorOS</h1>
```

Updated:
```tsx
<div className="min-h-screen bg-gradient-to-br from-brand-900 to-brand-950 ...">
<h1 className="text-3xl font-bold text-white font-heading tracking-tight">ContractorOS</h1>
```

---

## Parallel Work Plan

### Batch 1 — Shared Components (No Dependencies, Highest Leverage)
| Agent | Task | Files | Est. Tokens |
|-------|------|-------|-------------|
| UI Agent 1 | Update Card.tsx: rounded-2xl, shadow-card, gradient variant support | `components/ui/Card.tsx` | ~15k |
| UI Agent 2 | Update PageHeader + StatsGrid: font-heading, premium stat pattern | `components/ui/PageHeader.tsx`, `components/ui/StatsGrid.tsx` | ~15k |
| UI Agent 3 | Update FilterBar + FormModal + EmptyState + DataTable: rounded-xl/2xl, font-heading | 4 files in `components/ui/` | ~20k |

### Batch 2 — Core Dashboard Pages (Depends on Batch 1 for Card/StatsGrid)
| Agent | Task | Files | Est. Tokens |
|-------|------|-------|-------------|
| Page Agent 1 | Update Clients + Expenses pages: premium stat cards, font-heading, gradients | 2 page files | ~25k |
| Page Agent 2 | Update Invoices + Projects pages: premium stat cards, font-heading, gradients | 2 page files | ~25k |
| Page Agent 3 | Update Team + Subcontractors pages: premium stat pattern, font-heading | 2 page files | ~20k |

### Batch 3 — Secondary Pages + Auth Pages
| Agent | Task | Files | Est. Tokens |
|-------|------|-------|-------------|
| Page Agent 1 | Update Login + Register + Onboarding: brand colors, font-heading | 3-4 files | ~15k |
| Page Agent 2 | Update Schedule + Messages + Reports + Settings pages | 4-5 files | ~25k |
| Page Agent 3 | Update Estimates + Daily Logs + Intelligence (verify) + Documents | 4 files | ~20k |

### Batch 4 — Portal Pages + Polish
| Agent | Task | Files | Est. Tokens |
|-------|------|-------|-------------|
| Portal Agent 1 | Update Client Portal pages | `app/client/**` | ~15k |
| Portal Agent 2 | Update Sub + Field Portal pages | `app/sub/**`, `app/field/**` | ~15k |
| Polish Agent | Update E-Signature public page, verify mobile responsiveness | `app/sign/[token]/**` | ~10k |

### Batch 5 — Verification
| Agent | Task | Files | Est. Tokens |
|-------|------|-------|-------------|
| Test Agent | `npx tsc --noEmit`, visual spot-check across all portals | — | ~10k |

---

## Acceptance Criteria

### Must Have
- [ ] `font-heading` (Outfit) applied to all page titles, section headers, stat labels, nav items
- [ ] Card component updated: `rounded-2xl`, `shadow-card` default, `border-gray-100`
- [ ] All 6 core dashboard pages (clients, expenses, invoices, projects, team, subcontractors) use premium stat card pattern with gradient backgrounds
- [ ] PageHeader uses `font-heading tracking-tight` on title
- [ ] StatsGrid uses premium icon containers (`rounded-xl bg-white shadow-sm ring-1 ring-black/5`)
- [ ] Login/Register pages use brand colors (`brand-900`/`brand-950`) instead of hardcoded `blue-600`/`blue-800`
- [ ] FormModal uses `rounded-2xl`, `font-heading` on title
- [ ] No TypeScript errors — `npx tsc --noEmit` passes
- [ ] Mobile responsiveness preserved (no broken layouts)

### Should Have
- [ ] Secondary dashboard pages (schedule, messages, reports, settings, estimates, logs) updated
- [ ] Portal pages (client, sub, field) updated to match premium patterns
- [ ] E-Signature public page polished with brand styling
- [ ] EmptyState component uses subtle gradient background

### Nice to Have
- [ ] Hover glow effects (`hover:shadow-lg hover:shadow-brand-500/5`) on interactive cards
- [ ] Ambient blur circles on stat card hover (like dashboard homepage)
- [ ] Consistent animation usage (`animate-fade-in`) on page load

---

## Style Guide Reference (Copy-Paste Patterns)

### Premium Stat Card
```tsx
<div className="group relative overflow-hidden rounded-2xl border p-5 transition-all duration-300
  bg-gradient-to-br bg-white hover:shadow-lg hover:shadow-brand-500/5
  from-blue-500/10 to-blue-600/5 border-blue-200/50">
  <div className="flex items-start justify-between">
    <div>
      <p className="text-xs font-bold uppercase tracking-wider text-gray-400 font-heading">Title</p>
      <h3 className="mt-2 text-2xl font-bold text-gray-900 font-heading tracking-tight">Value</h3>
    </div>
    <div className="p-2.5 rounded-xl bg-white shadow-sm ring-1 ring-black/5 text-blue-600">
      <Icon className="h-5 w-5" />
    </div>
  </div>
</div>
```

### Premium Section Card
```tsx
<div className="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden">
  <div className="px-6 py-4 bg-gray-50/50 border-b border-gray-100 flex items-center justify-between">
    <h2 className="text-sm font-bold text-gray-800 font-heading uppercase tracking-wider">Section Title</h2>
  </div>
  <div className="p-6">
    {/* content */}
  </div>
</div>
```

### Premium Page Header
```tsx
<h1 className="text-xl sm:text-2xl font-bold text-gray-900 font-heading tracking-tight">Page Title</h1>
<p className="mt-1 text-sm text-gray-500">Description text</p>
```

### Color Gradient Map (for stat cards)
```tsx
const STAT_GRADIENTS = {
  blue:   'from-blue-500/10 to-blue-600/5 border-blue-200/50',
  green:  'from-green-500/10 to-green-600/5 border-green-200/50',
  yellow: 'from-amber-500/10 to-amber-600/5 border-amber-200/50',
  red:    'from-red-500/10 to-red-600/5 border-red-200/50',
  purple: 'from-purple-500/10 to-purple-600/5 border-purple-200/50',
  orange: 'from-orange-500/10 to-orange-600/5 border-orange-200/50',
};
```

---

## Decision Log

| Decision | Rationale | Alternative Considered |
|----------|-----------|----------------------|
| Update shared components first (Card, PageHeader, StatsGrid) | Cascade effect — fixes 20+ pages at once | Page-by-page updates — slower, inconsistent |
| Keep Card backward compatible (new defaults, not breaking) | Existing pages auto-improve without code changes | Breaking change requiring all consumers update — too risky |
| Use `rounded-2xl` as new Card default (not `rounded-3xl`) | `rounded-3xl` is for hero/featured sections only | `rounded-3xl` everywhere — too rounded for data-dense UI |
| Update login to brand colors | Brand consistency on first-touch page | Keep blue — doesn't match brand identity |
| Portal pages as separate batch | Lower priority than dashboard; can be deferred if time-constrained | Skip portals entirely — creates inconsistency |

---

## Estimated Token Budget

| Phase | Tokens | Notes |
|-------|--------|-------|
| Reading this brief | ~5k | Skip plan mode entirely |
| Batch 1: Shared components | ~50k | 3 parallel agents, 8 files |
| Batch 2: Core dashboard pages | ~70k | 3 parallel agents, 6 pages |
| Batch 3: Secondary + auth pages | ~60k | 3 parallel agents, 10-12 files |
| Batch 4: Portal pages | ~30k | 2 parallel agents |
| Batch 5: Verification | ~10k | tsc + visual check |
| **Total** | **~225k** | **Large sprint — consider splitting into 72a/72b** |

---

## Sprint Splitting Option

If this feels too large for a single sprint:

**Sprint 72a: Component Library + Core Pages** (~120k tokens)
- Batch 1 (shared components) + Batch 2 (6 core dashboard pages)
- Delivers the highest-impact visual improvements

**Sprint 72b: Secondary Pages + Portals** (~105k tokens)
- Batch 3 (auth + secondary pages) + Batch 4 (portal pages) + Batch 5 (verification)
- Completes full platform consistency
