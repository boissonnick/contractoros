# Sprint 131: Smart Notifications & Auto-Categorization — Implementation Brief

> **Generated:** 2026-02-06
> **Generated By:** Roadmap Planning Session (Phase 20: AI & Intelligence)
> **Status:** Ready for Implementation (skip plan mode)
> **Priority:** P1 | **Hours:** 6-8

---

## Overview

AI-powered notification intelligence and expense auto-categorization. Daily digest summarizes activity, expenses auto-categorize from receipts, and anomaly alerts flag unusual patterns.

---

## Files to Create

| # | File Path | Purpose | Pattern |
|---|-----------|---------|---------|
| 1 | lib/ai/notification-digest.ts | AI summarizes daily activity into 3-5 takeaways | estimate-generator pattern |
| 2 | lib/ai/expense-categorizer.ts | Receipt photo → OCR → AI assigns category/project/vendor | assistant route |
| 3 | lib/ai/payment-predictor.ts | Predict when invoice will be paid based on client history | Pure utility |
| 4 | lib/ai/anomaly-detector.ts | Flag unusual expenses, late payments, budget overruns | Pure utility |
| 5 | app/api/ai/digest/route.ts | Generate daily digest | API route |
| 6 | app/api/ai/categorize-expense/route.ts | Auto-categorize expense | API route |
| 7 | components/notifications/DailyDigest.tsx | Digest display card | Card pattern |
| 8 | components/notifications/AnomalyAlert.tsx | Anomaly alert card | Alert pattern |

## Files to Modify

| # | File Path | What Changes |
|---|-----------|-------------|
| 1 | app/dashboard/page.tsx | Add daily digest widget |
| 2 | lib/hooks/useExpenses.ts | Auto-categorize on receipt upload |
| 3 | lib/hooks/useNotifications.ts | Priority scoring integration |

---

## Parallel Work Plan

### Batch 1
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 1 | Notification digest + daily summary | ~25k |
| Agent 2 | Expense auto-categorizer | ~20k |
| Agent 3 | Anomaly detector + payment predictor | ~20k |

### Batch 2
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 4 | API routes + UI components + integration | ~25k |

---

## Acceptance Criteria

- [ ] Daily digest summarizes activity in 3-5 key takeaways
- [ ] Expenses auto-categorize from receipt photos via AI
- [ ] Anomaly alerts fire for unusual expenses and budget overruns
- [ ] Payment prediction shows estimated payment date per invoice
- [ ] npx tsc --noEmit passes

---

## Estimated Token Budget: ~90k
