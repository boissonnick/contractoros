# Sprint 133: React Native Project Setup & Shared Types — Implementation Brief

> **Generated:** 2026-02-06
> **Generated By:** Roadmap Planning Session (Phase 21: Native Mobile)
> **Status:** Ready for Implementation (skip plan mode)
> **Priority:** P0 | **Hours:** 10-14

---

## Overview

Bootstrap the React Native project with Expo (managed workflow), create shared TypeScript types package, set up Firebase in React Native, build navigation structure, and implement the authentication flow.

---

## Architecture Decisions

| Decision | Rationale | Alternative |
|----------|-----------|-------------|
| Expo managed workflow | Easier builds, OTA updates, EAS Build | Bare workflow — harder maintenance |
| Firebase JS SDK (not @react-native-firebase) | Same API as web, named DB "contractoros" support | @react-native-firebase — different API |
| React Navigation | Industry standard, typed routes, deep linking | Expo Router — less mature |
| NativeWind | Tailwind syntax in RN, consistent with web | StyleSheet.create — no style sharing |
| packages/shared/ for types | Clean separation, both apps import same types | Symlinks — fragile |
| npm workspaces | Simple monorepo, already using npm | Turborepo — overkill for 2 apps |

---

## Files to Create (30 files)

### Root Config
| # | File | Purpose |
|---|------|---------|
| 1 | packages/shared/package.json | Shared types package config |
| 2 | packages/shared/tsconfig.json | TypeScript config |
| 3 | packages/shared/types/index.ts | Re-export all domain types |

### Mobile App Scaffold
| # | File | Purpose |
|---|------|---------|
| 4 | apps/mobile/app.json | Expo config (name, slug, icon, splash) |
| 5 | apps/mobile/package.json | Dependencies (Expo 52, RN 0.77, Firebase 12) |
| 6 | apps/mobile/tsconfig.json | TypeScript config with shared types |
| 7 | apps/mobile/babel.config.js | Babel + NativeWind |
| 8 | apps/mobile/App.tsx | Entry point: AuthProvider → Navigation |
| 9 | apps/mobile/eas.json | EAS Build profiles (dev, preview, production) |

### Firebase + Auth
| # | File | Purpose |
|---|------|---------|
| 10 | apps/mobile/src/lib/firebase.ts | Firebase JS SDK init with named DB |
| 11 | apps/mobile/src/lib/auth.tsx | AuthProvider for React Native |

### Navigation
| # | File | Purpose |
|---|------|---------|
| 12 | apps/mobile/src/navigation/AppNavigator.tsx | Bottom tabs + stack navigators |
| 13 | apps/mobile/src/navigation/AuthNavigator.tsx | Login flow when unauthenticated |
| 14 | apps/mobile/src/navigation/types.ts | Typed navigation params |

### Screen Shells
| # | File | Purpose |
|---|------|---------|
| 15 | apps/mobile/src/screens/LoginScreen.tsx | Email + Google sign-in |
| 16 | apps/mobile/src/screens/DashboardScreen.tsx | Dashboard shell |
| 17 | apps/mobile/src/screens/ProjectsScreen.tsx | Projects list shell |
| 18 | apps/mobile/src/screens/TimeClockScreen.tsx | Time clock shell |
| 19 | apps/mobile/src/screens/MessagesScreen.tsx | Messages shell |
| 20 | apps/mobile/src/screens/SettingsScreen.tsx | Settings shell |

### Theme
| # | File | Purpose |
|---|------|---------|
| 21 | apps/mobile/src/theme/tokens.ts | Design tokens (colors, spacing, typography) |
| 22 | apps/mobile/src/theme/tailwind.config.ts | NativeWind Tailwind config |

### UI Components
| # | File | Purpose |
|---|------|---------|
| 23 | apps/mobile/src/components/ui/Button.tsx | Themed button |
| 24 | apps/mobile/src/components/ui/Card.tsx | Card wrapper |
| 25 | apps/mobile/src/components/ui/Input.tsx | Text input |
| 26 | apps/mobile/src/components/ui/ScreenWrapper.tsx | SafeArea + ScrollView |

---

## Critical Note: Named Database

```typescript
// apps/mobile/src/lib/firebase.ts
import { initializeApp } from 'firebase/app';
import { getFirestore } from 'firebase/firestore';

const app = initializeApp(firebaseConfig);
export const db = getFirestore(app, 'contractoros'); // MUST use named DB
```

---

## Parallel Work Plan

### Batch 1 (No Dependencies)
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 1 | Create packages/shared/ with extracted types | ~25k |
| Agent 2 | Create apps/mobile/ Expo scaffold | ~20k |
| Agent 3 | Update root package.json with workspaces | ~5k |

### Batch 2 (Depends on Batch 1)
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 1 | Firebase init + AuthProvider for RN | ~25k |
| Agent 2 | AppNavigator + screen shells | ~30k |
| Agent 3 | Theme + NativeWind config | ~10k |

### Batch 3 (Integration)
| Agent | Task | Est. Tokens |
|-------|------|-------------|
| Agent 1 | Wire App.tsx, test auth flow on simulator | ~15k |
| Agent 2 | Update web imports for shared package | ~15k |

---

## Acceptance Criteria

- [ ] packages/shared/ with extracted types importable by both apps
- [ ] apps/mobile/ runs on iOS Simulator (npx expo start)
- [ ] Firebase Auth works (email + Google sign-in)
- [ ] Firestore reads from named database "contractoros"
- [ ] Bottom tab navigation with 5 tabs
- [ ] Auth flow: Login when unauthenticated, tabs when authenticated
- [ ] TypeScript passes in both apps/web and apps/mobile
- [ ] Web app still builds correctly after shared types extraction
- [ ] Design tokens match web (primary: #2563eb)

---

## Risk Notes

1. **Named Database "contractoros"**: Firebase JS SDK v12 supports `getFirestore(app, "contractoros")` in React Native. Verify on simulator.
2. **NativeWind v4**: Ensure compatible with web Tailwind v4 config.
3. **Shared types**: COPY to packages/shared/, don't move — don't break web app.

---

## Estimated Token Budget: ~180k
