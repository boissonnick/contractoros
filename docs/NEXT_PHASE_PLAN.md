# ContractorOS Phase 6 Plan: Financial Operations & Mobile Experience

> **Status:** Draft
> **Created:** 2026-02-05
> **Target:** Sprints 63-66 (Next 4 Weeks)
> **Priorities:** Derived from `STRATEGIC_PLAN_FEB_2026.md` and Research (RS-01, RS-03, RS-07)

---

## Executive Summary

with Phase 5 (DX & Code Quality) and the core QuickBooks integration foundation complete, Phase 6 shifts focus to **User Experience** and **Financial Intelligence**. The goal is to make the platform feel "finished" on mobile devices while delivering the deep financial insights (Job Costing, BI) that differentiate ContractorOS from basic project management tools.

---

## Phase 6 Roadmap

| Sprint | Focus | Key Deliverables | Strategic Alignment |
|--------|-------|------------------|---------------------|
| **63** | **Mobile Experience Overhaul** | App-like nav, pull-to-refresh, touch targets, animations | **P1** (Strat Plan) |
| **64** | **Firebase 12 Upgrade** | SDK migration, named DB fix | **P2** (Infrastructure) |
| **65** | **Job Costing Engine** | Real-time cost tracking, budget vs actual, Cloud Functions | **P1** (Strat Plan) |
| **66** | **Scoping Sprint** | Pre-generate implementation briefs for Sprints 67-69 | **DX** (Process) |
| **67** | **Financial Intelligence** | Profitability dashboard, Cash flow visuals | **RS-03** (BI) |
| **68** | **Expense Automation** | Receipt OCR (Mindee), Auto-categorization | **RS-07** (OCR) |

---

## Detailed Sprint Plans

## Detailed Sprint Plans

### âœ… Sprint 63: Mobile Experience Overhaul (COMPLETED)
**Goal:** Make the web app feel like a native app on mobile.
**Spec:** [`docs/specs/EPIC-06-MOBILE-OVERHAUL.md`](file:///Users/nickbodkins/contractoros/docs/specs/EPIC-06-MOBILE-OVERHAUL.md)
**Inputs:** `STRATEGIC_PLAN_FEB_2026.md` (Mobile UI Polish), `RS-01` (Navigation)

**Status:** âœ… Complete (Deployed via CLI)

### âœ… Sprint 65: Job Costing Engine (COMPLETE)
**Goal:** Real-time visibility into project financial health.
**Spec:** [`docs/specs/EPIC-07-JOB-COSTING.md`](file:///Users/nickbodkins/contractoros/docs/specs/EPIC-07-JOB-COSTING.md)
**Status:** âœ… Complete

### ðŸ”§ Sprint 66: Scoping Sprint (NEXT UP)
**Goal:** Pre-generate implementation briefs for Sprints 67-69, eliminating plan mode overhead.
**Spec:** [`docs/specs/SPRINT-65-SCOPING.md`](file:///Users/nickbodkins/contractoros/docs/specs/SPRINT-65-SCOPING.md)

**Why:** Every sprint wastes 150-200k tokens and 15-20 min in plan mode rediscovering the codebase. This sprint runs 3 parallel Explore agents to generate implementation-ready briefs, saving ~500k tokens across the next 3 sprints.

**Deliverables:**
- [ ] `docs/specs/sprint-67-brief.md` â€” BI Dashboard implementation brief
- [ ] `docs/specs/sprint-68-brief.md` â€” Expense OCR implementation brief
- [ ] `docs/specs/sprint-69-brief.md` â€” Next backlog priority implementation brief
- [ ] Updated MODULE_REGISTRY.md with any new discoveries

**Execution:** 3 parallel Explore sub-agents + 1 main session review (~30 min total)

### ðŸ“Š Sprint 67: Financial Intelligence (BI MVP)
**Goal:** Actionable insights for business owners.
**Spec:** [`docs/specs/EPIC-08-BI-DASHBOARDS.md`](file:///Users/nickbodkins/contractoros/docs/specs/EPIC-08-BI-DASHBOARDS.md)
**Brief:** `docs/specs/sprint-67-brief.md` (generated by Sprint 66)
**Inputs:** `RS-03` (BI Analytics)

**Scope (Sequential):**
1.  **Company Overview:** The "Pulse" (Revenue, Margin, Pipeline).
2.  **Project Profitability:** Leaderboard of active jobs (RAG status).
3.  **Cash Flow:** AR Aging and Runaway.

**Technical Tasks:**
- [ ] Create `app/dashboard/intelligence` layout.
- [ ] Build `RevenueTrendChart` and `MarginTrendChart`.
- [ ] Implement `ProjectProfitabilityTable` with RAG status.

### ðŸ§¾ Sprint 68: Expense Automation (OCR)
**Goal:** Eliminate manual data entry for receipts.
**Brief:** `docs/specs/sprint-68-brief.md` (generated by Sprint 66)
**Inputs:** `RS-07` (Expense OCR)

**Scope:**
- **Integration:** Mindee API integration for receipt scanning.
- **Workflow:** Upload Photo -> OCR Extract -> Verify & Save -> Sync to QBO.
- **Mobile:** "Quick Capture" button on mobile dashboard.

**Technical Tasks:**
- [ ] Create `lib/ocr/mindee.ts` service.
- [ ] Build `ReceiptCaptureModal` with camera interface.
- [ ] Implementation auto-matching logic (Vendor/Category).

---

## Immediate Next Actions (Start of Sprint 63)

1. **Verify QuickBooks (Zero Sprint Task):**
   - Although code exists, run a full manual verification of the QuickBooks OAuth and Sync flow.
   - Confirm `sync-customers.ts` and UI are functioning in Staging/Dev.
   - **Deliverable:** "QuickBooks Verification Report" (or bug tickets).

2. **Launch Sprint 63 (Mobile):**
   - Check `COMPONENT_PATTERNS.md` for mobile component guidelines.
   - Begin with `AppShell` navigation updates.

---

## Risks & Mitigations

| Risk | Mitigation |
|------|------------|
| **QBO Complexity** | If QBO verification fails, Sprint 63 will need to absorb QBO fixes. **Mitigation:** Verify QBO *Day 1*. |
| **Mobile Performance** | Heavy DOM on mobile. **Mitigation:** Use virtualization for lists (`react-window` or similar) if list scaling is an issue. |
| **Data Consistency** | Job Costing relies on accurate data. **Mitigation:** Robust Cloud Functions to guarantee aggregates are correct. |

---

## Success Metrics (End of Phase 6)
- **Mobile:** Mobile User Retention up (if tracked), or qualitative "feel" parity with native apps.
- **Financial:** 100% of Active Projects have real-time Margin visibility.
- **Efficiency:** Time-to-enter-expense reduced by 80% (via OCR).
